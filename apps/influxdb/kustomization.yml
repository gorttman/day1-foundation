apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: monitoring

# Common labels applied to all resources
commonLabels:
  app.kubernetes.io/part-of: observability
  tier: day1

resources:
  - influxdb-namespace.yml
  - influxdb-pvc.yml
  - influxdb-configmap.yml
  - influxdb-secret.yml
  - influxdb-statefulset.yml
  - influxdb-service.yml
  - influxdb-ingress.yml

# Images - pin to specific version for reproducibility
images:
  - name: influxdb
    newTag: 2.7-alpine

# Configuration transformers
configMapGenerator: []
secretGenerator: []

# Resource ordering via sync-waves in annotations:
# Wave 0: Namespace
# Wave 1: PVC, ConfigMap, Secret
# Wave 2: StatefulSet, Service
# Wave 3: Ingress

