apiVersion: v1
kind: ConfigMap
metadata:
  name: coredns
  namespace: kube-system
data:
  Corefile: |
    .:53 {
      errors
      health
      ready
      reload 5s

      kubernetes cluster.local in-addr.arpa ip6.arpa {
        pods insecure
        fallthrough
        ttl 30
      }

      import /etc/coredns/custom/*.server

      hosts /etc/coredns/custom/hosts.override {
        ttl 60
        reload 5s
        fallthrough
      }

      forward . 1.1.1.1 8.8.8.8 {
        max_concurrent 1000
      }
      cache 30
    }
